!function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);class i{static BuildArray(t,e){const r=[];for(let i=0;i<t;++i)r.push(e());return r}}class s{static WithinEpsilon(t,e,r=1401298e-51){var i=t-e;return-r<=i&&i<=r}static ToHex(t){var e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()}static Sign(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}static Clamp(t,e=0,r=1){return Math.min(r,Math.max(e,t))}static Log2(t){return Math.log(t)*Math.LOG2E}static Repeat(t,e){return t-Math.floor(t/e)*e}static Normalize(t,e,r){return(t-e)/(r-e)}static Denormalize(t,e,r){return t*(r-e)+e}static DeltaAngle(t,e){var r=s.Repeat(e-t,360);return r>180&&(r-=360),r}static PingPong(t,e){var r=s.Repeat(t,2*e);return e-Math.abs(r-e)}static SmoothStep(t,e,r){var i=s.Clamp(r);return e*(i=-2*i*i*i+3*i*i)+t*(1-i)}static MoveTowards(t,e,r){return Math.abs(e-t)<=r?e:t+s.Sign(e-t)*r}static MoveTowardsAngle(t,e,r){var i=s.DeltaAngle(t,e),a=0;return-r<i&&i<r?a=e:(e=t+i,a=s.MoveTowards(t,e,r)),a}static Lerp(t,e,r){return t+(e-t)*r}static LerpAngle(t,e,r){var i=s.Repeat(e-t,360);return i>180&&(i-=360),t+i*s.Clamp(r)}static InverseLerp(t,e,r){return t!=e?s.Clamp((r-t)/(e-t)):0}static Hermite(t,e,r,i,s){var a=s*s,n=s*a;return t*(2*n-3*a+1)+r*(-2*n+3*a)+e*(n-2*a+s)+i*(n-a)}static RandomRange(t,e){return t===e?t:Math.random()*(e-t)+t}static RangeToPercent(t,e,r){return(t-e)/(r-e)}static PercentToRange(t,e,r){return(r-e)*t+e}static NormalizeRadians(t){return t-=s.TwoPi*Math.floor((t+Math.PI)/s.TwoPi)}}s.TwoPi=2*Math.PI;const a=1/2.2,n=2.2;let o=.001;class h{constructor(t=0,e=0,r=0){this.r=t,this.g=e,this.b=r}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let t=this.r||0;return t=397*(t=397*t^(this.g||0))^(this.b||0)}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this}toColor4(t=1){return new u(this.r,this.g,this.b,t)}asArray(){var t=new Array;return this.toArray(t,0),t}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(t){return new h(this.r*t.r,this.g*t.g,this.b*t.b)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b}equalsFloats(t,e,r){return this.r===t&&this.g===e&&this.b===r}scale(t){return new h(this.r*t,this.g*t,this.b*t)}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this}clampToRef(t=0,e=1,r){return r.r=s.Clamp(this.r,t,e),r.g=s.Clamp(this.g,t,e),r.b=s.Clamp(this.b,t,e),this}add(t){return new h(this.r+t.r,this.g+t.g,this.b+t.b)}addToRef(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this}subtract(t){return new h(this.r-t.r,this.g-t.g,this.b-t.b)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this}clone(){return new h(this.r,this.g,this.b)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyFromFloats(t,e,r){return this.r=t,this.g=e,this.b=r,this}set(t,e,r){return this.copyFromFloats(t,e,r)}toHexString(){var t=255*this.r|0,e=255*this.g|0,r=255*this.b|0;return"#"+s.ToHex(t)+s.ToHex(e)+s.ToHex(r)}toLinearSpace(){var t=new h;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,n),t.g=Math.pow(this.g,n),t.b=Math.pow(this.b,n),this}toGammaSpace(){var t=new h;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,a),t.g=Math.pow(this.g,a),t.b=Math.pow(this.b,a),this}static FromHexString(t){if("#"!==t.substring(0,1)||7!==t.length)return new h(0,0,0);var e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return h.FromInts(e,r,i)}static FromArray(t,e=0){return new h(t[e],t[e+1],t[e+2])}static FromInts(t,e,r){return new h(t/255,e/255,r/255)}static Lerp(t,e,r){var i=new h(0,0,0);return h.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){i.r=t.r+(e.r-t.r)*r,i.g=t.g+(e.g-t.g)*r,i.b=t.b+(e.b-t.b)*r}static Red(){return new h(1,0,0)}static Green(){return new h(0,1,0)}static Blue(){return new h(0,0,1)}static Black(){return new h(0,0,0)}static get BlackReadOnly(){return h._BlackReadOnly}static White(){return new h(1,1,1)}static Purple(){return new h(.5,0,.5)}static Magenta(){return new h(1,0,1)}static Yellow(){return new h(1,1,0)}static Gray(){return new h(.5,.5,.5)}static Teal(){return new h(0,1,1)}static Random(){return new h(Math.random(),Math.random(),Math.random())}}h._BlackReadOnly=h.Black();class u{constructor(t=0,e=0,r=0,i=1){this.r=t,this.g=e,this.b=r,this.a=i}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}asArray(){var t=new Array;return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}add(t){return new u(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new u(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this}scale(t){return new u(this.r*t,this.g*t,this.b*t,this.a*t)}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this}clampToRef(t=0,e=1,r){return r.r=s.Clamp(this.r,t,e),r.g=s.Clamp(this.g,t,e),r.b=s.Clamp(this.b,t,e),r.a=s.Clamp(this.a,t,e),this}multiply(t){return new u(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let t=this.r||0;return t=397*(t=397*(t=397*t^(this.g||0))^(this.b||0))^(this.a||0)}clone(){return new u(this.r,this.g,this.b,this.a)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}copyFromFloats(t,e,r,i){return this.r=t,this.g=e,this.b=r,this.a=i,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}toHexString(){var t=255*this.r|0,e=255*this.g|0,r=255*this.b|0,i=255*this.a|0;return"#"+s.ToHex(t)+s.ToHex(e)+s.ToHex(r)+s.ToHex(i)}toLinearSpace(){var t=new u;return this.toLinearSpaceToRef(t),t}toLinearSpaceToRef(t){return t.r=Math.pow(this.r,n),t.g=Math.pow(this.g,n),t.b=Math.pow(this.b,n),t.a=this.a,this}toGammaSpace(){var t=new u;return this.toGammaSpaceToRef(t),t}toGammaSpaceToRef(t){return t.r=Math.pow(this.r,a),t.g=Math.pow(this.g,a),t.b=Math.pow(this.b,a),t.a=this.a,this}static FromHexString(t){if("#"!==t.substring(0,1)||9!==t.length)return new u(0,0,0,0);var e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16),s=parseInt(t.substring(7,9),16);return u.FromInts(e,r,i,s)}static Lerp(t,e,r){var i=new u(0,0,0,0);return u.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){i.r=t.r+(e.r-t.r)*r,i.g=t.g+(e.g-t.g)*r,i.b=t.b+(e.b-t.b)*r,i.a=t.a+(e.a-t.a)*r}static FromColor3(t,e=1){return new u(t.r,t.g,t.b,e)}static FromArray(t,e=0){return new u(t[e],t[e+1],t[e+2],t[e+3])}static FromInts(t,e,r,i){return new u(t/255,e/255,r/255,i/255)}static CheckColors4(t,e){if(t.length===3*e){for(var r=[],i=0;i<t.length;i+=3){var s=i/3*4;r[s]=t[i],r[s+1]=t[i+1],r[s+2]=t[i+2],r[s+3]=1}return r}return t}}class l{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return"{X: "+this.x+" Y:"+this.y+"}"}getClassName(){return"Vector2"}getHashCode(){let t=this.x||0;return t=397*t^(this.y||0)}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,this}asArray(){var t=new Array;return this.toArray(t,0),t}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,e){return this.x=t,this.y=e,this}set(t,e){return this.copyFromFloats(t,e)}add(t){return new l(this.x+t.x,this.y+t.y)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addVector3(t){return new l(this.x+t.x,this.y+t.y)}subtract(t){return new l(this.x-t.x,this.y-t.y)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new l(this.x*t.x,this.y*t.y)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this}multiplyByFloats(t,e){return new l(this.x*t,this.y*e)}divide(t){return new l(this.x/t.x,this.y/t.y)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this}divideInPlace(t){return this.divideToRef(t,this)}negate(){return new l(-this.x,-this.y)}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){let e=new l(0,0);return this.scaleToRef(t,e),e}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,this}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,e=o){return t&&s.WithinEpsilon(this.x,t.x,e)&&s.WithinEpsilon(this.y,t.y,e)}floor(){return new l(Math.floor(this.x),Math.floor(this.y))}fract(){return new l(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){var t=this.length();if(0===t)return this;var e=1/t;return this.x*=e,this.y*=e,this}clone(){return new l(this.x,this.y)}static Zero(){return new l(0,0)}static One(){return new l(1,1)}static FromArray(t,e=0){return new l(t[e],t[e+1])}static FromArrayToRef(t,e,r){r.x=t[e],r.y=t[e+1]}static CatmullRom(t,e,r,i,s){var a=s*s,n=s*a,o=.5*(2*e.x+(-t.x+r.x)*s+(2*t.x-5*e.x+4*r.x-i.x)*a+(-t.x+3*e.x-3*r.x+i.x)*n),h=.5*(2*e.y+(-t.y+r.y)*s+(2*t.y-5*e.y+4*r.y-i.y)*a+(-t.y+3*e.y-3*r.y+i.y)*n);return new l(o,h)}static Clamp(t,e,r){var i=t.x;i=(i=i>r.x?r.x:i)<e.x?e.x:i;var s=t.y;return s=(s=s>r.y?r.y:s)<e.y?e.y:s,new l(i,s)}static Hermite(t,e,r,i,s){var a=s*s,n=s*a,o=2*n-3*a+1,h=-2*n+3*a,u=n-2*a+s,c=n-a,f=t.x*o+r.x*h+e.x*u+i.x*c,d=t.y*o+r.y*h+e.y*u+i.y*c;return new l(f,d)}static Lerp(t,e,r){var i=t.x+(e.x-t.x)*r,s=t.y+(e.y-t.y)*r;return new l(i,s)}static Dot(t,e){return t.x*e.x+t.y*e.y}static Normalize(t){var e=t.clone();return e.normalize(),e}static Minimize(t,e){var r=t.x<e.x?t.x:e.x,i=t.y<e.y?t.y:e.y;return new l(r,i)}static Maximize(t,e){var r=t.x>e.x?t.x:e.x,i=t.y>e.y?t.y:e.y;return new l(r,i)}static Transform(t,e){let r=l.Zero();return l.TransformToRef(t,e,r),r}static TransformToRef(t,e,r){const i=e.m;var s=t.x*i[0]+t.y*i[4]+i[12],a=t.x*i[1]+t.y*i[5]+i[13];r.x=s,r.y=a}static PointInTriangle(t,e,r,i){let s=.5*(-r.y*i.x+e.y*(-r.x+i.x)+e.x*(r.y-i.y)+r.x*i.y),a=s<0?-1:1,n=(e.y*i.x-e.x*i.y+(i.y-e.y)*t.x+(e.x-i.x)*t.y)*a,o=(e.x*r.y-e.y*r.x+(e.y-r.y)*t.x+(r.x-e.x)*t.y)*a;return n>0&&o>0&&n+o<2*s*a}static Distance(t,e){return Math.sqrt(l.DistanceSquared(t,e))}static DistanceSquared(t,e){var r=t.x-e.x,i=t.y-e.y;return r*r+i*i}static Center(t,e){var r=t.add(e);return r.scaleInPlace(.5),r}static DistanceOfPointFromSegment(t,e,r){let i=l.DistanceSquared(e,r);if(0===i)return l.Distance(t,e);let s=r.subtract(e),a=Math.max(0,Math.min(1,l.Dot(t.subtract(e),s)/i)),n=e.add(s.multiplyByFloats(a,a));return l.Distance(t,n)}}class c{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.z=r}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+"}"}getClassName(){return"Vector3"}getHashCode(){let t=this.x||0;return t=397*(t=397*t^(this.y||0))^(this.z||0)}asArray(){var t=[];return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this}toQuaternion(){return d.RotationYawPitchRoll(this.y,this.x,this.z)}addInPlace(t){return this.addInPlaceFromFloats(t.x,t.y,t.z)}addInPlaceFromFloats(t,e,r){return this.x+=t,this.y+=e,this.z+=r,this}add(t){return new c(this.x+t.x,this.y+t.y,this.z+t.z)}addToRef(t,e){return e.copyFromFloats(this.x+t.x,this.y+t.y,this.z+t.z)}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtract(t){return new c(this.x-t.x,this.y-t.y,this.z-t.z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t.x,t.y,t.z,e)}subtractFromFloats(t,e,r){return new c(this.x-t,this.y-e,this.z-r)}subtractFromFloatsToRef(t,e,r,i){return i.copyFromFloats(this.x-t,this.y-e,this.z-r)}negate(){return new c(-this.x,-this.y,-this.z)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this}scale(t){return new c(this.x*t,this.y*t,this.z*t)}scaleToRef(t,e){return e.copyFromFloats(this.x*t,this.y*t,this.z*t)}scaleAndAddToRef(t,e){return e.addInPlaceFromFloats(this.x*t,this.y*t,this.z*t)}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z}equalsWithEpsilon(t,e=o){return t&&s.WithinEpsilon(this.x,t.x,e)&&s.WithinEpsilon(this.y,t.y,e)&&s.WithinEpsilon(this.z,t.z,e)}equalsToFloats(t,e,r){return this.x===t&&this.y===e&&this.z===r}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiply(t){return this.multiplyByFloats(t.x,t.y,t.z)}multiplyToRef(t,e){return e.copyFromFloats(this.x*t.x,this.y*t.y,this.z*t.z)}multiplyByFloats(t,e,r){return new c(this.x*t,this.y*e,this.z*r)}divide(t){return new c(this.x/t.x,this.y/t.y,this.z/t.z)}divideToRef(t,e){return e.copyFromFloats(this.x/t.x,this.y/t.y,this.z/t.z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t.x,t.y,t.z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t.x,t.y,t.z)}minimizeInPlaceFromFloats(t,e,r){return t<this.x&&(this.x=t),e<this.y&&(this.y=e),r<this.z&&(this.z=r),this}maximizeInPlaceFromFloats(t,e,r){return t>this.x&&(this.x=t),e>this.y&&(this.y=e),r>this.z&&(this.z=r),this}isNonUniformWithinEpsilon(t){let e=Math.abs(this.x),r=Math.abs(this.y);if(!s.WithinEpsilon(e,r,t))return!0;let i=Math.abs(this.z);return!s.WithinEpsilon(e,i,t)||!s.WithinEpsilon(r,i,t)}get isNonUniform(){let t=Math.abs(this.x),e=Math.abs(this.y);if(t!==e)return!0;let r=Math.abs(this.z);return t!==r||e!==r}floor(){return new c(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new c(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){return"xyz"===(t=t.toLowerCase())?this:(v.Vector3[0].copyFrom(this),["x","y","z"].forEach((e,r)=>{this[e]=v.Vector3[0][t[r]]}),this)}rotateByQuaternionToRef(t,e){return t.toRotationMatrix(v.Matrix[0]),c.TransformCoordinatesToRef(this,v.Matrix[0],e),e}rotateByQuaternionAroundPointToRef(t,e,r){return this.subtractToRef(e,v.Vector3[0]),v.Vector3[0].rotateByQuaternionToRef(t,v.Vector3[0]),e.addToRef(v.Vector3[0],r),r}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new c(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/e,t)}clone(){return new c(this.x,this.y,this.z)}copyFrom(t){return this.copyFromFloats(t.x,t.y,t.z)}copyFromFloats(t,e,r){return this.x=t,this.y=e,this.z=r,this}set(t,e,r){return this.copyFromFloats(t,e,r)}setAll(t){return this.x=this.y=this.z=t,this}static GetClipFactor(t,e,r,i){var s=c.Dot(t,r)-i;return s/(s-(c.Dot(e,r)-i))}static GetAngleBetweenVectors(t,e,r){const i=t.normalizeToRef(v.Vector3[1]),s=e.normalizeToRef(v.Vector3[2]),a=c.Dot(i,s),n=v.Vector3[3];return c.CrossToRef(i,s,n),c.Dot(n,r)>0?Math.acos(a):-Math.acos(a)}static FromArray(t,e=0){return new c(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return c.FromArray(t,e)}static FromArrayToRef(t,e,r){r.x=t[e],r.y=t[e+1],r.z=t[e+2]}static FromFloatArrayToRef(t,e,r){return c.FromArrayToRef(t,e,r)}static FromFloatsToRef(t,e,r,i){i.copyFromFloats(t,e,r)}static Zero(){return new c(0,0,0)}static One(){return new c(1,1,1)}static Up(){return new c(0,1,0)}static get UpReadOnly(){return c._UpReadOnly}static Down(){return new c(0,-1,0)}static Forward(){return new c(0,0,1)}static Backward(){return new c(0,0,-1)}static Right(){return new c(1,0,0)}static Left(){return new c(-1,0,0)}static TransformCoordinates(t,e){var r=c.Zero();return c.TransformCoordinatesToRef(t,e,r),r}static TransformCoordinatesToRef(t,e,r){c.TransformCoordinatesFromFloatsToRef(t.x,t.y,t.z,e,r)}static TransformCoordinatesFromFloatsToRef(t,e,r,i,s){const a=i.m;var n=t*a[0]+e*a[4]+r*a[8]+a[12],o=t*a[1]+e*a[5]+r*a[9]+a[13],h=t*a[2]+e*a[6]+r*a[10]+a[14],u=1/(t*a[3]+e*a[7]+r*a[11]+a[15]);s.x=n*u,s.y=o*u,s.z=h*u}static TransformNormal(t,e){var r=c.Zero();return c.TransformNormalToRef(t,e,r),r}static TransformNormalToRef(t,e,r){this.TransformNormalFromFloatsToRef(t.x,t.y,t.z,e,r)}static TransformNormalFromFloatsToRef(t,e,r,i,s){const a=i.m;s.x=t*a[0]+e*a[4]+r*a[8],s.y=t*a[1]+e*a[5]+r*a[9],s.z=t*a[2]+e*a[6]+r*a[10]}static CatmullRom(t,e,r,i,s){var a=s*s,n=s*a,o=.5*(2*e.x+(-t.x+r.x)*s+(2*t.x-5*e.x+4*r.x-i.x)*a+(-t.x+3*e.x-3*r.x+i.x)*n),h=.5*(2*e.y+(-t.y+r.y)*s+(2*t.y-5*e.y+4*r.y-i.y)*a+(-t.y+3*e.y-3*r.y+i.y)*n),u=.5*(2*e.z+(-t.z+r.z)*s+(2*t.z-5*e.z+4*r.z-i.z)*a+(-t.z+3*e.z-3*r.z+i.z)*n);return new c(o,h,u)}static Clamp(t,e,r){const i=new c;return c.ClampToRef(t,e,r,i),i}static ClampToRef(t,e,r,i){var s=t.x;s=(s=s>r.x?r.x:s)<e.x?e.x:s;var a=t.y;a=(a=a>r.y?r.y:a)<e.y?e.y:a;var n=t.z;n=(n=n>r.z?r.z:n)<e.z?e.z:n,i.copyFromFloats(s,a,n)}static Hermite(t,e,r,i,s){var a=s*s,n=s*a,o=2*n-3*a+1,h=-2*n+3*a,u=n-2*a+s,l=n-a,f=t.x*o+r.x*h+e.x*u+i.x*l,d=t.y*o+r.y*h+e.y*u+i.y*l,m=t.z*o+r.z*h+e.z*u+i.z*l;return new c(f,d,m)}static Lerp(t,e,r){var i=new c(0,0,0);return c.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){i.x=t.x+(e.x-t.x)*r,i.y=t.y+(e.y-t.y)*r,i.z=t.z+(e.z-t.z)*r}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static Cross(t,e){var r=c.Zero();return c.CrossToRef(t,e,r),r}static CrossToRef(t,e,r){const i=t.y*e.z-t.z*e.y,s=t.z*e.x-t.x*e.z,a=t.x*e.y-t.y*e.x;r.copyFromFloats(i,s,a)}static Normalize(t){var e=c.Zero();return c.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){t.normalizeToRef(e)}static Project(t,e,r,i){var s=i.width,a=i.height,n=i.x,o=i.y,h=v.Matrix[1];m.FromValuesToRef(s/2,0,0,0,0,-a/2,0,0,0,0,.5,0,n+s/2,a/2+o,.5,1,h);var u=v.Matrix[0];return e.multiplyToRef(r,u),u.multiplyToRef(h,u),c.TransformCoordinates(t,u)}static _UnprojectFromInvertedMatrixToRef(t,e,r){c.TransformCoordinatesToRef(t,e,r);const i=e.m;var a=t.x*i[3]+t.y*i[7]+t.z*i[11]+i[15];s.WithinEpsilon(a,1)&&r.scaleInPlace(1/a)}static UnprojectFromTransform(t,e,r,i,s){var a=v.Matrix[0];i.multiplyToRef(s,a),a.invert(),t.x=t.x/e*2-1,t.y=-(t.y/r*2-1);const n=new c;return c._UnprojectFromInvertedMatrixToRef(t,a,n),n}static Unproject(t,e,r,i,s,a){let n=c.Zero();return c.UnprojectToRef(t,e,r,i,s,a,n),n}static UnprojectToRef(t,e,r,i,s,a,n){c.UnprojectFloatsToRef(t.x,t.y,t.z,e,r,i,s,a,n)}static UnprojectFloatsToRef(t,e,r,i,s,a,n,o,h){var u=v.Matrix[0];a.multiplyToRef(n,u),u.multiplyToRef(o,u),u.invert();var l=v.Vector3[0];l.x=t/i*2-1,l.y=-(e/s*2-1),l.z=2*r-1,c._UnprojectFromInvertedMatrixToRef(l,u,h)}static Minimize(t,e){var r=t.clone();return r.minimizeInPlace(e),r}static Maximize(t,e){var r=t.clone();return r.maximizeInPlace(e),r}static Distance(t,e){return Math.sqrt(c.DistanceSquared(t,e))}static DistanceSquared(t,e){var r=t.x-e.x,i=t.y-e.y,s=t.z-e.z;return r*r+i*i+s*s}static Center(t,e){var r=t.add(e);return r.scaleInPlace(.5),r}static RotationFromAxis(t,e,r){var i=c.Zero();return c.RotationFromAxisToRef(t,e,r,i),i}static RotationFromAxisToRef(t,e,r,i){var s=v.Quaternion[0];d.RotationQuaternionFromAxisToRef(t,e,r,s),s.toEulerAnglesToRef(i)}}c._UpReadOnly=c.Up();class f{constructor(t,e,r,i){this.x=t,this.y=e,this.z=r,this.w=i}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)}asArray(){var t=new Array;return this.toArray(t,0),t}toArray(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new f(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new f(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this}subtractFromFloats(t,e,r,i){return new f(this.x-t,this.y-e,this.z-r,this.w-i)}subtractFromFloatsToRef(t,e,r,i,s){return s.x=this.x-t,s.y=this.y-e,s.z=this.z-r,s.w=this.w-i,this}negate(){return new f(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new f(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,e=o){return t&&s.WithinEpsilon(this.x,t.x,e)&&s.WithinEpsilon(this.y,t.y,e)&&s.WithinEpsilon(this.z,t.z,e)&&s.WithinEpsilon(this.w,t.w,e)}equalsToFloats(t,e,r,i){return this.x===t&&this.y===e&&this.z===r&&this.w===i}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new f(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this}multiplyByFloats(t,e,r,i){return new f(this.x*t,this.y*e,this.z*r,this.w*i)}divide(t){return new f(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new f(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new f(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new c(this.x,this.y,this.z)}clone(){return new f(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}setAll(t){return this.x=this.y=this.z=this.w=t,this}static FromArray(t,e){return e||(e=0),new f(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,r){r.x=t[e],r.y=t[e+1],r.z=t[e+2],r.w=t[e+3]}static FromFloatArrayToRef(t,e,r){f.FromArrayToRef(t,e,r)}static FromFloatsToRef(t,e,r,i,s){s.x=t,s.y=e,s.z=r,s.w=i}static Zero(){return new f(0,0,0,0)}static One(){return new f(1,1,1,1)}static Normalize(t){var e=f.Zero();return f.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){e.copyFrom(t),e.normalize()}static Minimize(t,e){var r=t.clone();return r.minimizeInPlace(e),r}static Maximize(t,e){var r=t.clone();return r.maximizeInPlace(e),r}static Distance(t,e){return Math.sqrt(f.DistanceSquared(t,e))}static DistanceSquared(t,e){var r=t.x-e.x,i=t.y-e.y,s=t.z-e.z,a=t.w-e.w;return r*r+i*i+s*s+a*a}static Center(t,e){var r=t.add(e);return r.scaleInPlace(.5),r}static TransformNormal(t,e){var r=f.Zero();return f.TransformNormalToRef(t,e,r),r}static TransformNormalToRef(t,e,r){const i=e.m;var s=t.x*i[0]+t.y*i[4]+t.z*i[8],a=t.x*i[1]+t.y*i[5]+t.z*i[9],n=t.x*i[2]+t.y*i[6]+t.z*i[10];r.x=s,r.y=a,r.z=n,r.w=t.w}static TransformNormalFromFloatsToRef(t,e,r,i,s,a){const n=s.m;a.x=t*n[0]+e*n[4]+r*n[8],a.y=t*n[1]+e*n[5]+r*n[9],a.z=t*n[2]+e*n[6]+r*n[10],a.w=i}static FromVector3(t,e=0){return new f(t.x,t.y,t.z,e)}}class d{constructor(t=0,e=0,r=0,i=1){this.x=t,this.y=e,this.z=r,this.w=i}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Quaternion"}getHashCode(){let t=this.x||0;return t=397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)}asArray(){return[this.x,this.y,this.z,this.w]}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}clone(){return new d(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this}set(t,e,r,i){return this.copyFromFloats(t,e,r,i)}add(t){return new d(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return new d(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}scale(t){return new d(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}multiply(t){var e=new d(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){var r=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,i=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,s=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,a=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;return e.copyFromFloats(r,i,s,a),this}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new d(-this.x,-this.y,-this.z,this.w)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}normalize(){var t=this.length();if(0===t)return this;var e=1/t;return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}toEulerAngles(t="YZX"){var e=c.Zero();return this.toEulerAnglesToRef(e),e}toEulerAnglesToRef(t){var e=this.z,r=this.x,i=this.y,s=this.w,a=s*s,n=e*e,o=r*r,h=i*i,u=i*e-r*s;return u<-.4999999?(t.y=2*Math.atan2(i,s),t.x=Math.PI/2,t.z=0):u>.4999999?(t.y=2*Math.atan2(i,s),t.x=-Math.PI/2,t.z=0):(t.z=Math.atan2(2*(r*i+e*s),-n-o+h+a),t.x=Math.asin(-2*(e*i-r*s)),t.y=Math.atan2(2*(e*r+i*s),n-o-h+a)),this}toRotationMatrix(t){return m.FromQuaternionToRef(this,t),this}fromRotationMatrix(t){return d.FromRotationMatrixToRef(t,this),this}static FromRotationMatrix(t){var e=new d;return d.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){var r,i=t.m,s=i[0],a=i[4],n=i[8],o=i[1],h=i[5],u=i[9],l=i[2],c=i[6],f=i[10],d=s+h+f;d>0?(r=.5/Math.sqrt(d+1),e.w=.25/r,e.x=(c-u)*r,e.y=(n-l)*r,e.z=(o-a)*r):s>h&&s>f?(r=2*Math.sqrt(1+s-h-f),e.w=(c-u)/r,e.x=.25*r,e.y=(a+o)/r,e.z=(n+l)/r):h>f?(r=2*Math.sqrt(1+h-s-f),e.w=(n-l)/r,e.x=(a+o)/r,e.y=.25*r,e.z=(u+c)/r):(r=2*Math.sqrt(1+f-s-h),e.w=(o-a)/r,e.x=(n+l)/r,e.y=(u+c)/r,e.z=.25*r)}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}static AreClose(t,e){return d.Dot(t,e)>=0}static Zero(){return new d(0,0,0,0)}static Inverse(t){return new d(-t.x,-t.y,-t.z,t.w)}static InverseToRef(t,e){return e.set(-t.x,-t.y,-t.z,t.w),e}static Identity(){return new d(0,0,0,1)}static IsIdentity(t){return t&&0===t.x&&0===t.y&&0===t.z&&1===t.w}static RotationAxis(t,e){return d.RotationAxisToRef(t,e,new d)}static RotationAxisToRef(t,e,r){var i=Math.sin(e/2);return t.normalize(),r.w=Math.cos(e/2),r.x=t.x*i,r.y=t.y*i,r.z=t.z*i,r}static FromArray(t,e){return e||(e=0),new d(t[e],t[e+1],t[e+2],t[e+3])}static FromEulerAngles(t,e,r){var i=new d;return d.RotationYawPitchRollToRef(e,t,r,i),i}static FromEulerAnglesToRef(t,e,r,i){return d.RotationYawPitchRollToRef(e,t,r,i),i}static FromEulerVector(t){var e=new d;return d.RotationYawPitchRollToRef(t.y,t.x,t.z,e),e}static FromEulerVectorToRef(t,e){return d.RotationYawPitchRollToRef(t.y,t.x,t.z,e),e}static RotationYawPitchRoll(t,e,r){var i=new d;return d.RotationYawPitchRollToRef(t,e,r,i),i}static RotationYawPitchRollToRef(t,e,r,i){var s=.5*r,a=.5*e,n=.5*t,o=Math.sin(s),h=Math.cos(s),u=Math.sin(a),l=Math.cos(a),c=Math.sin(n),f=Math.cos(n);i.x=f*u*h+c*l*o,i.y=c*l*h-f*u*o,i.z=f*l*o-c*u*h,i.w=f*l*h+c*u*o}static RotationAlphaBetaGamma(t,e,r){var i=new d;return d.RotationAlphaBetaGammaToRef(t,e,r,i),i}static RotationAlphaBetaGammaToRef(t,e,r,i){var s=.5*(r+t),a=.5*(r-t),n=.5*e;i.x=Math.cos(a)*Math.sin(n),i.y=Math.sin(a)*Math.sin(n),i.z=Math.sin(s)*Math.cos(n),i.w=Math.cos(s)*Math.cos(n)}static RotationQuaternionFromAxis(t,e,r){var i=new d(0,0,0,0);return d.RotationQuaternionFromAxisToRef(t,e,r,i),i}static RotationQuaternionFromAxisToRef(t,e,r,i){var s=v.Matrix[0];m.FromXYZAxesToRef(t.normalize(),e.normalize(),r.normalize(),s),d.FromRotationMatrixToRef(s,i)}static Slerp(t,e,r){var i=d.Identity();return d.SlerpToRef(t,e,r,i),i}static SlerpToRef(t,e,r,i){var s,a,n=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w,o=!1;if(n<0&&(o=!0,n=-n),n>.999999)a=1-r,s=o?-r:r;else{var h=Math.acos(n),u=1/Math.sin(h);a=Math.sin((1-r)*h)*u,s=o?-Math.sin(r*h)*u:Math.sin(r*h)*u}i.x=a*t.x+s*e.x,i.y=a*t.y+s*e.y,i.z=a*t.z+s*e.z,i.w=a*t.w+s*e.w}static Hermite(t,e,r,i,s){var a=s*s,n=s*a,o=2*n-3*a+1,h=-2*n+3*a,u=n-2*a+s,l=n-a,c=t.x*o+r.x*h+e.x*u+i.x*l,f=t.y*o+r.y*h+e.y*u+i.y*l,m=t.z*o+r.z*h+e.z*u+i.z*l,_=t.w*o+r.w*h+e.w*u+i.w*l;return new d(c,f,m,_)}}class m{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,this._m=new Float32Array(16),this._updateIdentityStatus(!1)}get m(){return this._m}_markAsUpdated(){this.updateFlag=m._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,e=!1,r=!1,i=!0){this.updateFlag=m._updateFlagSeed++,this._isIdentity=t,this._isIdentity3x2=t||r,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]?this._isIdentity3x2=!1:0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,e=t[0],r=t[1],i=t[2],s=t[3],a=t[4],n=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],f=t[11],d=t[12],m=t[13],_=t[14],y=t[15],x=c*y-_*f,p=l*y-m*f,v=l*_-m*c,g=u*y-d*f,w=u*_-c*d,R=u*m-d*l;return e*+(n*x-o*p+h*v)+r*-(a*x-o*g+h*w)+i*+(a*p-n*g+h*R)+s*-(a*v-n*w+o*R)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return m.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){var e=new m;return this.addToRef(t,e),e}addToRef(t,e){const r=this._m,i=e._m,s=t.m;for(var a=0;a<16;a++)i[a]=r[a]+s[a];return e._markAsUpdated(),this}addToSelf(t){const e=this._m,r=t.m;for(var i=0;i<16;i++)e[i]+=r[i];return this._markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return m.IdentityToRef(t),this;const e=this._m,r=e[0],i=e[1],s=e[2],a=e[3],n=e[4],o=e[5],h=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],_=e[12],y=e[13],x=e[14],p=e[15],v=f*p-x*d,g=c*p-y*d,w=c*x-y*f,R=l*p-_*d,T=l*x-f*_,z=l*y-_*c,F=+(o*v-h*g+u*w),b=-(n*v-h*R+u*T),A=+(n*g-o*R+u*z),M=-(n*w-o*T+h*z),I=r*F+i*b+s*A+a*M;if(0===I)return t.copyFrom(this),this;const E=1/I,S=h*p-x*u,C=o*p-y*u,P=o*x-y*h,L=n*p-_*u,V=n*x-_*h,U=n*y-_*o,D=h*d-f*u,B=o*d-c*u,O=o*f-c*h,N=n*d-l*u,H=n*f-l*h,k=n*c-l*o,Z=-(i*v-s*g+a*w),G=+(r*v-s*R+a*T),q=-(r*g-i*R+a*z),W=+(r*w-i*T+s*z),Y=+(i*S-s*C+a*P),X=-(r*S-s*L+a*V),j=+(r*C-i*L+a*U),Q=-(r*P-i*V+s*U),$=-(i*D-s*B+a*O),K=+(r*D-s*N+a*H),J=-(r*B-i*N+a*k),tt=+(r*O-i*H+s*k);return m.FromValuesToRef(F*E,Z*E,Y*E,$*E,b*E,G*E,X*E,K*E,A*E,q*E,j*E,J*E,M*E,W*E,Q*E,tt*E,t),this}addAtIndex(t,e){return this._m[t]+=e,this._markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this._markAsUpdated(),this}setTranslationFromFloats(t,e,r){return this._m[12]=t,this._m[13]=e,this._m[14]=r,this._markAsUpdated(),this}addTranslationFromFloats(t,e,r){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=r,this._markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t.x,t.y,t.z)}getTranslation(){return new c(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this}removeRotationAndScaling(){const t=this.m;return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){var e=new m;return this.multiplyToRef(t,e),e}copyFrom(t){t.copyToArray(this._m);const e=t;return this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}copyToArray(t,e=0){for(var r=0;r<16;r++)t[e+r]=this._m[r];return this}multiplyToRef(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e._markAsUpdated(),this)}multiplyToArray(t,e,r){const i=this._m,s=t.m;var a=i[0],n=i[1],o=i[2],h=i[3],u=i[4],l=i[5],c=i[6],f=i[7],d=i[8],m=i[9],_=i[10],y=i[11],x=i[12],p=i[13],v=i[14],g=i[15],w=s[0],R=s[1],T=s[2],z=s[3],F=s[4],b=s[5],A=s[6],M=s[7],I=s[8],E=s[9],S=s[10],C=s[11],P=s[12],L=s[13],V=s[14],U=s[15];return e[r]=a*w+n*F+o*I+h*P,e[r+1]=a*R+n*b+o*E+h*L,e[r+2]=a*T+n*A+o*S+h*V,e[r+3]=a*z+n*M+o*C+h*U,e[r+4]=u*w+l*F+c*I+f*P,e[r+5]=u*R+l*b+c*E+f*L,e[r+6]=u*T+l*A+c*S+f*V,e[r+7]=u*z+l*M+c*C+f*U,e[r+8]=d*w+m*F+_*I+y*P,e[r+9]=d*R+m*b+_*E+y*L,e[r+10]=d*T+m*A+_*S+y*V,e[r+11]=d*z+m*M+_*C+y*U,e[r+12]=x*w+p*F+v*I+g*P,e[r+13]=x*R+p*b+v*E+g*L,e[r+14]=x*T+p*A+v*S+g*V,e[r+15]=x*z+p*M+v*C+g*U,this}equals(t){const e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;const r=this.m,i=e.m;return r[0]===i[0]&&r[1]===i[1]&&r[2]===i[2]&&r[3]===i[3]&&r[4]===i[4]&&r[5]===i[5]&&r[6]===i[6]&&r[7]===i[7]&&r[8]===i[8]&&r[9]===i[9]&&r[10]===i[10]&&r[11]===i[11]&&r[12]===i[12]&&r[13]===i[13]&&r[14]===i[14]&&r[15]===i[15]}clone(){const t=new m;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=this._m[0]||0;for(let e=1;e<16;e++)t=397*t^(this._m[e]||0);return t}decompose(t,e,r){if(this._isIdentity)return r&&r.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;const i=this._m;if(r&&r.copyFromFloats(i[12],i[13],i[14]),(t=t||v.Vector3[0]).x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),t.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),t.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),this.determinant()<=0&&(t.y*=-1),0===t.x||0===t.y||0===t.z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){const r=1/t.x,s=1/t.y,a=1/t.z;m.FromValuesToRef(i[0]*r,i[1]*r,i[2]*r,0,i[4]*s,i[5]*s,i[6]*s,0,i[8]*a,i[9]*a,i[10]*a,0,0,0,0,1,v.Matrix[0]),d.FromRotationMatrixToRef(v.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;var e=4*t;return new f(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){return m.Transpose(this)}transposeToRef(t){return m.TransposeToRef(this,t),this}setRowFromFloats(t,e,r,i,s){if(t<0||t>3)return this;var a=4*t;return this._m[a+0]=e,this._m[a+1]=r,this._m[a+2]=i,this._m[a+3]=s,this._markAsUpdated(),this}scale(t){var e=new m;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(var r=0;r<16;r++)e._m[r]=this._m[r]*t;return e._markAsUpdated(),this}scaleAndAddToRef(t,e){for(var r=0;r<16;r++)e._m[r]+=this._m[r]*t;return e._markAsUpdated(),this}toNormalMatrix(t){const e=v.Matrix[0];this.invertToRef(e),e.transposeToRef(t);var r=t._m;m.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,t)}getRotationMatrix(){var t=new m;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const e=v.Vector3[0];if(!this.decompose(e))return m.IdentityToRef(t),this;const r=this._m,i=1/e.x,s=1/e.y,a=1/e.z;return m.FromValuesToRef(r[0]*i,r[1]*i,r[2]*i,0,r[4]*s,r[5]*s,r[6]*s,0,r[8]*a,r[9]*a,r[10]*a,0,0,0,0,1,t),this}toggleModelMatrixHandInPlace(){const t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this._markAsUpdated()}static FromArray(t,e=0){var r=new m;return m.FromArrayToRef(t,e,r),r}static FromArrayToRef(t,e,r){for(var i=0;i<16;i++)r._m[i]=t[i+e];r._markAsUpdated()}static FromFloat32ArrayToRefScaled(t,e,r,i){for(var s=0;s<16;s++)i._m[s]=t[s+e]*r;i._markAsUpdated()}static get IdentityReadOnly(){return m._identityReadOnly}static FromValuesToRef(t,e,r,i,s,a,n,o,h,u,l,c,f,d,m,_,y){const x=y._m;x[0]=t,x[1]=e,x[2]=r,x[3]=i,x[4]=s,x[5]=a,x[6]=n,x[7]=o,x[8]=h,x[9]=u,x[10]=l,x[11]=c,x[12]=f,x[13]=d,x[14]=m,x[15]=_,y._markAsUpdated()}static FromValues(t,e,r,i,s,a,n,o,h,u,l,c,f,d,_,y){var x=new m;const p=x._m;return p[0]=t,p[1]=e,p[2]=r,p[3]=i,p[4]=s,p[5]=a,p[6]=n,p[7]=o,p[8]=h,p[9]=u,p[10]=l,p[11]=c,p[12]=f,p[13]=d,p[14]=_,p[15]=y,x._markAsUpdated(),x}static Compose(t,e,r){var i=new m;return m.ComposeToRef(t,e,r,i),i}static ComposeToRef(t,e,r,i){let s=i._m;var a=e.x,n=e.y,o=e.z,h=e.w,u=a+a,l=n+n,c=o+o,f=a*u,d=a*l,m=a*c,_=n*l,y=n*c,x=o*c,p=h*u,v=h*l,g=h*c,w=t.x,R=t.y,T=t.z;s[0]=(1-(_+x))*w,s[1]=(d+g)*w,s[2]=(m-v)*w,s[3]=0,s[4]=(d-g)*R,s[5]=(1-(f+x))*R,s[6]=(y+p)*R,s[7]=0,s[8]=(m+v)*T,s[9]=(y-p)*T,s[10]=(1-(f+_))*T,s[11]=0,s[12]=r.x,s[13]=r.y,s[14]=r.z,s[15]=1,i._markAsUpdated()}static Identity(){const t=m.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)}static Zero(){const t=m.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){var e=new m;return m.RotationXToRef(t,e),e}static Invert(t){var e=new m;return t.invertToRef(e),e}static RotationXToRef(t,e){var r=Math.sin(t),i=Math.cos(t);m.FromValuesToRef(1,0,0,0,0,i,r,0,0,-r,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r)}static RotationY(t){var e=new m;return m.RotationYToRef(t,e),e}static RotationYToRef(t,e){var r=Math.sin(t),i=Math.cos(t);m.FromValuesToRef(i,0,-r,0,0,1,0,0,r,0,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r)}static RotationZ(t){var e=new m;return m.RotationZToRef(t,e),e}static RotationZToRef(t,e){var r=Math.sin(t),i=Math.cos(t);m.FromValuesToRef(i,r,0,0,-r,i,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===r)}static RotationAxis(t,e){var r=new m;return m.RotationAxisToRef(t,e,r),r}static RotationAxisToRef(t,e,r){var i=Math.sin(-e),s=Math.cos(-e),a=1-s;t.normalize();const n=r._m;n[0]=t.x*t.x*a+s,n[1]=t.x*t.y*a-t.z*i,n[2]=t.x*t.z*a+t.y*i,n[3]=0,n[4]=t.y*t.x*a+t.z*i,n[5]=t.y*t.y*a+s,n[6]=t.y*t.z*a-t.x*i,n[7]=0,n[8]=t.z*t.x*a-t.y*i,n[9]=t.z*t.y*a+t.x*i,n[10]=t.z*t.z*a+s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,r._markAsUpdated()}static RotationAlignToRef(t,e,r){const i=c.Cross(e,t),s=c.Dot(e,t),a=1/(1+s),n=r._m;n[0]=i.x*i.x*a+s,n[1]=i.y*i.x*a-i.z,n[2]=i.z*i.x*a+i.y,n[3]=0,n[4]=i.x*i.y*a+i.z,n[5]=i.y*i.y*a+s,n[6]=i.z*i.y*a-i.x,n[7]=0,n[8]=i.x*i.z*a-i.y,n[9]=i.y*i.z*a+i.x,n[10]=i.z*i.z*a+s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,r._markAsUpdated()}static RotationYawPitchRoll(t,e,r){var i=new m;return m.RotationYawPitchRollToRef(t,e,r,i),i}static RotationYawPitchRollToRef(t,e,r,i){d.RotationYawPitchRollToRef(t,e,r,v.Quaternion[0]),v.Quaternion[0].toRotationMatrix(i)}static Scaling(t,e,r){var i=new m;return m.ScalingToRef(t,e,r,i),i}static ScalingToRef(t,e,r,i){m.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1,i),i._updateIdentityStatus(1===t&&1===e&&1===r)}static Translation(t,e,r){var i=new m;return m.TranslationToRef(t,e,r,i),i}static TranslationToRef(t,e,r,i){m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1,i),i._updateIdentityStatus(0===t&&0===e&&0===r)}static Lerp(t,e,r){var i=new m;return m.LerpToRef(t,e,r,i),i}static LerpToRef(t,e,r,i){const s=i._m,a=t.m,n=e.m;for(var o=0;o<16;o++)s[o]=a[o]*(1-r)+n[o]*r;i._markAsUpdated()}static DecomposeLerp(t,e,r){var i=new m;return m.DecomposeLerpToRef(t,e,r,i),i}static DecomposeLerpToRef(t,e,r,i){var s=v.Vector3[0],a=v.Quaternion[0],n=v.Vector3[1];t.decompose(s,a,n);var o=v.Vector3[2],h=v.Quaternion[1],u=v.Vector3[3];e.decompose(o,h,u);var l=v.Vector3[4];c.LerpToRef(s,o,r,l);var f=v.Quaternion[2];d.SlerpToRef(a,h,r,f);var _=v.Vector3[5];c.LerpToRef(n,u,r,_),m.ComposeToRef(l,f,_,i)}static LookAtLH(t,e,r){var i=new m;return m.LookAtLHToRef(t,e,r,i),i}static LookAtLHToRef(t,e,r,i){const s=v.Vector3[0],a=v.Vector3[1],n=v.Vector3[2];e.subtractToRef(t,n),n.normalize(),c.CrossToRef(r,n,s);const o=s.lengthSquared();0===o?s.x=1:s.normalizeFromLength(Math.sqrt(o)),c.CrossToRef(n,s,a),a.normalize();var h=-c.Dot(s,t),u=-c.Dot(a,t),l=-c.Dot(n,t);m.FromValuesToRef(s.x,a.x,n.x,0,s.y,a.y,n.y,0,s.z,a.z,n.z,0,h,u,l,1,i)}static LookAtRH(t,e,r){var i=new m;return m.LookAtRHToRef(t,e,r,i),i}static LookAtRHToRef(t,e,r,i){const s=v.Vector3[0],a=v.Vector3[1],n=v.Vector3[2];t.subtractToRef(e,n),n.normalize(),c.CrossToRef(r,n,s);const o=s.lengthSquared();0===o?s.x=1:s.normalizeFromLength(Math.sqrt(o)),c.CrossToRef(n,s,a),a.normalize();var h=-c.Dot(s,t),u=-c.Dot(a,t),l=-c.Dot(n,t);m.FromValuesToRef(s.x,a.x,n.x,0,s.y,a.y,n.y,0,s.z,a.z,n.z,0,h,u,l,1,i)}static OrthoLH(t,e,r,i){var s=new m;return m.OrthoLHToRef(t,e,r,i,s),s}static OrthoLHToRef(t,e,r,i,s){let a=2/t,n=2/e,o=2/(i-r),h=-(i+r)/(i-r);m.FromValuesToRef(a,0,0,0,0,n,0,0,0,0,o,0,0,0,h,1,s),s._updateIdentityStatus(1===a&&1===n&&1===o&&0===h)}static OrthoOffCenterLH(t,e,r,i,s,a){var n=new m;return m.OrthoOffCenterLHToRef(t,e,r,i,s,a,n),n}static OrthoOffCenterLHToRef(t,e,r,i,s,a,n){let o=2/(e-t),h=2/(i-r),u=2/(a-s),l=-(a+s)/(a-s),c=(t+e)/(t-e),f=(i+r)/(r-i);m.FromValuesToRef(o,0,0,0,0,h,0,0,0,0,u,0,c,f,l,1,n),n._markAsUpdated()}static OrthoOffCenterRH(t,e,r,i,s,a){var n=new m;return m.OrthoOffCenterRHToRef(t,e,r,i,s,a,n),n}static OrthoOffCenterRHToRef(t,e,r,i,s,a,n){m.OrthoOffCenterLHToRef(t,e,r,i,s,a,n),n._m[10]*=-1}static PerspectiveLH(t,e,r,i){var s=new m;let a=2*r/t,n=2*r/e,o=(i+r)/(i-r),h=-2*i*r/(i-r);return m.FromValuesToRef(a,0,0,0,0,n,0,0,0,0,o,1,0,0,h,0,s),s._updateIdentityStatus(!1),s}static PerspectiveFovLH(t,e,r,i){var s=new m;return m.PerspectiveFovLHToRef(t,e,r,i,s),s}static PerspectiveFovLHToRef(t,e,r,i,s,a=!0){let n=r,o=i,h=1/Math.tan(.5*t),u=a?h/e:h,l=a?h:h*e,c=(o+n)/(o-n),f=-2*o*n/(o-n);m.FromValuesToRef(u,0,0,0,0,l,0,0,0,0,c,1,0,0,f,0,s),s._updateIdentityStatus(!1)}static PerspectiveFovRH(t,e,r,i){var s=new m;return m.PerspectiveFovRHToRef(t,e,r,i,s),s}static PerspectiveFovRHToRef(t,e,r,i,s,a=!0){let n=r,o=i,h=1/Math.tan(.5*t),u=a?h/e:h,l=a?h:h*e,c=-(o+n)/(o-n),f=-2*o*n/(o-n);m.FromValuesToRef(u,0,0,0,0,l,0,0,0,0,c,-1,0,0,f,0,s),s._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(t,e,r,i,s=!1){var a=s?-1:1,n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),h=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),l=2/(h+u),c=2/(n+o);const f=i._m;f[0]=l,f[1]=f[2]=f[3]=f[4]=0,f[5]=c,f[6]=f[7]=0,f[8]=(h-u)*l*.5,f[9]=-(n-o)*c*.5,f[10]=-r/(e-r),f[11]=1*a,f[12]=f[13]=f[15]=0,f[14]=-2*r*e/(r-e),i._markAsUpdated()}static GetFinalMatrix(t,e,r,i,s,a){var n=t.width,o=t.height,h=t.x,u=t.y,l=m.FromValues(n/2,0,0,0,0,-o/2,0,0,0,0,a-s,0,h+n/2,o/2+u,s,1),c=v.Matrix[0];return e.multiplyToRef(r,c),c.multiplyToRef(i,c),c.multiply(l)}static GetAsMatrix2x2(t){const e=t.m;return new Float32Array([e[0],e[1],e[4],e[5]])}static GetAsMatrix3x3(t){const e=t.m;return new Float32Array([e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]])}static Transpose(t){var e=new m;return m.TransposeToRef(t,e),e}static TransposeToRef(t,e){const r=e._m,i=t.m;r[0]=i[0],r[1]=i[4],r[2]=i[8],r[3]=i[12],r[4]=i[1],r[5]=i[5],r[6]=i[9],r[7]=i[13],r[8]=i[2],r[9]=i[6],r[10]=i[10],r[11]=i[14],r[12]=i[3],r[13]=i[7],r[14]=i[11],r[15]=i[15],e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)}static Reflection(t){var e=new m;return m.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();var r=t.normal.x,i=t.normal.y,s=t.normal.z,a=-2*r,n=-2*i,o=-2*s;m.FromValuesToRef(a*r+1,n*r,o*r,0,a*i,n*i+1,o*i,0,a*s,n*s,o*s+1,0,a*t.d,n*t.d,o*t.d,1,e)}static FromXYZAxesToRef(t,e,r,i){m.FromValuesToRef(t.x,t.y,t.z,0,e.x,e.y,e.z,0,r.x,r.y,r.z,0,0,0,0,1,i)}static FromQuaternionToRef(t,e){var r=t.x*t.x,i=t.y*t.y,s=t.z*t.z,a=t.x*t.y,n=t.z*t.w,o=t.z*t.x,h=t.y*t.w,u=t.y*t.z,l=t.x*t.w;e._m[0]=1-2*(i+s),e._m[1]=2*(a+n),e._m[2]=2*(o-h),e._m[3]=0,e._m[4]=2*(a-n),e._m[5]=1-2*(s+r),e._m[6]=2*(u+l),e._m[7]=0,e._m[8]=2*(o+h),e._m[9]=2*(u-l),e._m[10]=1-2*(i+r),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e._markAsUpdated()}}m._updateFlagSeed=0,m._identityReadOnly=m.Identity();var _,y;!function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(_||(_={}));class x{}x.X=new c(1,0,0),x.Y=new c(0,1,0),x.Z=new c(0,0,1);!function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(y||(y={}));class p{}p.Color3=i.BuildArray(3,h.Black),p.Color4=i.BuildArray(3,()=>new u(0,0,0,0)),p.Vector2=i.BuildArray(3,l.Zero),p.Vector3=i.BuildArray(13,c.Zero),p.Vector4=i.BuildArray(3,f.Zero),p.Quaternion=i.BuildArray(2,d.Zero),p.Matrix=i.BuildArray(8,m.Identity);class v{}v.Vector3=i.BuildArray(6,c.Zero),v.Matrix=i.BuildArray(2,m.Identity),v.Quaternion=i.BuildArray(3,d.Zero);class g{constructor(){this.position=new c(0,0,1),this.target=new c(0,0,-1),this.up=new c(0,1,0),this._matrix=new m}getMatrix(){return m.LookAtLHToRef(this.position,this.target,this.up,this._matrix),this._matrix}}g.Default=new g;class w{constructor(t,e,r){this.texActive=!1,this.sname=t,this.fs=r,this.vs=e}getPrograme(t){const e=this.getFSShader(t),r=this.getVSShader(t);if(void 0===this.shader_program&&t.getShaderParameter(e,t.COMPILE_STATUS)){const i=t.createProgram();this.shader_program=i,t.attachShader(this.shader_program,r),t.attachShader(this.shader_program,e),t.linkProgram(this.shader_program)}t.useProgram(this.shader_program),this.u_view_matrix_loc=t.getUniformLocation(this.shader_program,"u_ViewMatrix"),this.u_mouse_loc=t.getUniformLocation(this.shader_program,"u_mouse"),this.u_time_loc=t.getUniformLocation(this.shader_program,"u_time"),this.u_resolution_loc=t.getUniformLocation(this.shader_program,"u_resolution"),this.u_translate_loc=t.getUniformLocation(this.shader_program,"u_translate"),this.u_scale_loc=t.getUniformLocation(this.shader_program,"u_scale"),this.u_rotate_loc=t.getUniformLocation(this.shader_program,"u_rotate"),this.u_float_loc=t.getUniformLocation(this.shader_program,"u_float"),this.a_position_loc=t.getAttribLocation(this.shader_program,"a_position"),this.a_color_loc=t.getAttribLocation(this.shader_program,"a_color"),this.a_uv=t.getAttribLocation(this.shader_program,"a_uv"),this.u_texture=t.getUniformLocation(this.shader_program,"u_sampler"),this.u_texture1=t.getUniformLocation(this.shader_program,"u_sampler1"),this.a_position_loc>=0&&t.enableVertexAttribArray(this.a_position_loc),this.a_color_loc>=0&&t.enableVertexAttribArray(this.a_color_loc),this.a_uv>=0&&t.enableVertexAttribArray(this.a_uv),this.texActive&&(this.u_texture&&t.uniform1i(this.u_texture,0),this.u_texture1&&t.uniform1i(this.u_texture1,1))}getVSShader(t){return null===t?this.vshader:this.vshader?this.vshader:(this.vshader=t.createShader(t.VERTEX_SHADER),null===this.vshader?this.vshader:void 0===this.vs?this.vshader:(t.shaderSource(this.vshader,this.vs),t.compileShader(this.vshader),t.getShaderParameter(this.vshader,t.COMPILE_STATUS)?this.vshader:(console.error(`ERROR IN 'VERTEX_SHADER' SHADER: ${t.getShaderInfoLog(this.vshader)}`),this.vshader)))}getFSShader(t){return null===t?this.fshader:this.fshader?this.fshader:(this.fshader=t.createShader(t.FRAGMENT_SHADER),null===this.fshader?this.fshader:void 0===this.fs?this.fshader:(t.shaderSource(this.fshader,this.fs),t.compileShader(this.fshader),t.getShaderParameter(this.fshader,t.COMPILE_STATUS)?this.fshader:(console.error(`ERROR IN 'FRAGMENT_SHADER' SHADER: ${t.getShaderInfoLog(this.fshader)}`),this.fshader)))}}class R{constructor(t){this.FLOAT_SIZE=0,this.INT_SIZE=0,this.VERTEX_SIZE=3,this.COLOR_SIZE=4,this.UV_SIZE=2,this.FACE_SIZE=3,this.LINE_SIZE=2,this.POINT_SIZE=1,this.float_data=[],this.int_data=[],this.vertex_data=[],this.vertex_offset=0,this.color_data=[],this.color_offset=0,this.face_data=[],this.face_offset=0,this.point_data=[],this.point_offset=0,this.line_data=[],this.line_offset=0,this.uv_data=[],this.uv_offset=0,this.vname=t}addVertex(t,e,r=0){this.vertex_data.push([t,e,r])}addFace(t,e,r){this.face_data.push([t,e,r])}addPoint(t){this.point_data.push(t)}addColor(t,e,r,i){this.color_data.push([t,e,r,i])}addUV(t,e){this.uv_data.push([t,e])}addVertex2(t){this.vertex_data.push(t)}addFace2(t){this.face_data.push(t)}addPoint2(t){this.point_data.push(t)}addColor2(t){this.color_data.push(t)}addUV2(t){this.uv_data.push(t)}clearVertex(){this.vertex_data.length=0}clearFace(){this.face_data.length=0}clearPoint(){this.point_data.length=0}clearColor(){this.color_data.length=0}clearUV(){this.uv_data.length=0}update(t){this.activeFloatBuffer(t),this.activeIntBuffer(t)}activeFloatBuffer(t){this.float_buffer||(this.float_buffer=t.createBuffer()),this.float_data.length=0;const e=this.vertex_data.length;let r,i,s;for(let t=0;t<e;t++)r=this.vertex_data[t],i=this.color_data[t],s=this.uv_data[t],r&&this.float_data.push(...r),i&&this.float_data.push(...i),s&&this.float_data.push(...s);let a=0;this.vertex_data.length>0&&(this.vertex_offset=a,a+=this.VERTEX_SIZE),this.color_data.length>0&&(this.color_offset=a,a+=this.COLOR_SIZE),this.uv_data.length>0&&(this.uv_offset=a,a+=this.UV_SIZE),this.FLOAT_SIZE=a,t.bindBuffer(t.ARRAY_BUFFER,this.float_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.float_data),t.STATIC_DRAW)}activeIntBuffer(t){let e,r;this.int_buffer||(this.int_buffer=t.createBuffer()),this.int_data.length=0;let i=[],s=[];this.line_data.length=0;const a=this.face_data.length;for(let t=0;t<a;t++)if((e=this.face_data[t])&&i.push(...e),e)for(let t=0;t<3;t++)0===t?this.line_data.push([e[2],e[0]]):this.line_data.push([e[t-1],e[t]]);const n=this.line_data.length;for(let t=0;t<n;t++)(r=this.line_data[t])&&s.push(...r);let o=0;i.length>0&&(i.forEach(t=>{this.int_data.push(t)}),this.face_offset=o,o+=i.length),s.length>0&&(s.forEach(t=>{this.int_data.push(t)}),this.line_offset=o,o+=s.length),this.vertex_data.length>0&&(this.vertex_data.forEach((t,e)=>{this.int_data.push(e)}),this.point_offset=o,o+=this.vertex_data.length),this.INT_SIZE=o,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.int_buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.int_data),t.STATIC_DRAW)}}class T{constructor(t,e,r){this.wireFrame=!1,this.pointFrame=!1,this.triangleFrame=!0,this.alphaMode=0,this.translate=[0,0,0],this.scale=[1,1,1],this.rotate=[0,0,0],this.ufloat=0,this.id=t,this.dataBufferCfg=e,this.shaderCfg=r,this.texture=null,this.maskTexture=null}render(t){const e=t.engine.gl,r=this.shaderCfg;if(this.texture){if(this.shaderCfg.texActive=this.texture.active(),this.maskTexture&&(this.shaderCfg.texActive=this.maskTexture.active()),!this.shaderCfg.texActive)return}else e.bindTexture(e.TEXTURE_2D,null);r.getPrograme(e);const i=t.camera||g.Default;r.u_view_matrix_loc&&e.uniformMatrix4fv(r.u_view_matrix_loc,!1,i.getMatrix().m),r.u_mouse_loc&&e.uniform2fv(r.u_mouse_loc,t.engine.u_mouse),r.u_time_loc&&e.uniform1f(r.u_time_loc,.001*t.engine.timestamp),r.u_float_loc&&e.uniform1f(r.u_float_loc,this.ufloat),r.u_resolution_loc&&e.uniform2f(r.u_resolution_loc,t.engine.width,t.engine.height),r.u_translate_loc&&e.uniform3f(r.u_translate_loc,this.translate[0],this.translate[1],this.translate[2]),r.u_scale_loc&&e.uniform3f(r.u_scale_loc,this.scale[0],this.scale[1],this.scale[2]),r.u_rotate_loc&&e.uniform3f(r.u_rotate_loc,this.rotate[0],this.rotate[1],this.rotate[2]),r.a_position_loc>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.dataBufferCfg.float_buffer),e.vertexAttribPointer(r.a_position_loc,this.dataBufferCfg.VERTEX_SIZE,e.FLOAT,!1,4*this.dataBufferCfg.FLOAT_SIZE,4*this.dataBufferCfg.vertex_offset)),r.a_color_loc>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.dataBufferCfg.float_buffer),e.vertexAttribPointer(r.a_color_loc,this.dataBufferCfg.COLOR_SIZE,e.FLOAT,!1,4*this.dataBufferCfg.FLOAT_SIZE,4*this.dataBufferCfg.color_offset)),r.a_uv>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.dataBufferCfg.float_buffer),e.vertexAttribPointer(r.a_uv,this.dataBufferCfg.UV_SIZE,e.FLOAT,!1,4*this.dataBufferCfg.FLOAT_SIZE,4*this.dataBufferCfg.uv_offset)),this.dataBufferCfg.int_buffer&&(this.wireFrame&&this.dataBufferCfg.line_data.length>0&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.dataBufferCfg.int_buffer),e.drawElements(e.LINES,this.dataBufferCfg.line_data.length*this.dataBufferCfg.LINE_SIZE,e.UNSIGNED_SHORT,2*this.dataBufferCfg.line_offset)),this.triangleFrame&&this.dataBufferCfg.face_data.length>0&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.dataBufferCfg.int_buffer),e.drawElements(e.TRIANGLES,this.dataBufferCfg.face_data.length*this.dataBufferCfg.FACE_SIZE,e.UNSIGNED_SHORT,2*this.dataBufferCfg.face_offset)),this.pointFrame&&this.dataBufferCfg.vertex_data.length>0&&e.drawElements(e.POINTS,this.dataBufferCfg.vertex_data.length*this.dataBufferCfg.POINT_SIZE,e.UNSIGNED_SHORT,2*this.dataBufferCfg.point_offset)),e.flush()}}class z{constructor(t,e){this.viewport=[0,0,0,0],this.meshMap=new Map,this.sname=t,this.engine=e}setCamera(t){this.camera=t}addMesh(t){this.meshMap.set(t.id,t)}render(t){const e=this.engine.gl;e.disable(e.SCISSOR_TEST),e.viewport(this.viewport[0],this.viewport[1],this.viewport[2],this.viewport[3]),t&&e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.meshMap.forEach(t=>{t.render(this)})}}class F{constructor(t,e,r){this.fname=t,this._engine=e,this._tex=null,this._index=r||0,e.addTexture(this),F.loadCall(t,e,F.loaded)}active(){let t=!1;const e=this._engine.gl;return this._tex&&(0===this._index?e.activeTexture(e.TEXTURE0):1===this._index&&e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._tex),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.NEAREST,e.NEAREST),t=!0),t}remove(){this._engine.delTexture(this)}}F.loadCall=(t,e,r)=>{},F.loaded=(t,e,r)=>{const i=r.getTexture(e);if(i){const e=r.gl,s=e,a=e.createTexture();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),e.bindTexture(e.TEXTURE_2D,null),i._tex=a}};class b{constructor(t){this.u_mouse=[0,0],this.timestamp=0,this.sceneMap=new Map,this.textureMap=new Map,this._isDestroy=!1,this.loop=t=>{this.timestamp=t,this.renderLoop(t),requestAnimationFrame(this.loop)},this.canvas=t.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.gl=b.ctxInitFunc(this.canvas)}get isDestroy(){return this._isDestroy}static ctxInitFunc(t){let e=null;try{for(var r=0;r<b.contentModes.length;++r){try{e=t.getContext(b.contentModes[r],{alpha:!0,antialias:!0})}catch(t){}if(e)break}}catch(t){console.warn("There is not webgl compatible :( ")}return e}createTexture(t,e){let r=this.textureMap.get(t);return void 0===r&&(r=new F(t,this,e)),r}addTexture(t){this.textureMap.set(t.fname,t)}getTexture(t){return this.textureMap.get(t)}delTexture(t){this.textureMap.delete(t.fname),this.gl.deleteTexture(t)}addScene(t){this.sceneMap.set(t.sname,t)}clearColor(){const t=this.gl;t.viewport(0,0,this.width,this.height),t.clearColor(0,0,0,0)}renderLoop(t){}destroy(){this._isDestroy=!0,this.textureMap.forEach(t=>{this.delTexture(t)})}}b.uniforms_1f=["u_time"],b.uniforms_2fv=["u_mouse"],b.uniforms_2f=["u_resolution"],b.contentModes=["webgl","experimental-webgl","webgl2","webkit-3d","moz-webgl"];const A="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute   vec2    a_position;\nvarying     vec2    v_surfacePosition;\n\nuniform     mat4    u_ViewMatrix;\n\nvoid main( void ){\n    gl_Position = u_ViewMatrix * vec4( a_position, 0., 1. );\n    v_surfacePosition      = a_position;\n}\n",M="\n// Author @patriciogv - 2015\n// Title: Truchet - 10 print\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#define PI 3.14159265358979323846\n\nuniform vec2    u_resolution;\nuniform vec2    u_mouse;\nuniform float   u_time;\nuniform vec3    u_translate;\nuniform vec3    u_scale;\nuniform vec3    u_rotate;\n\nfloat random (in vec2 _st) {\n    return fract(sin(dot(_st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nvec2 truchetPattern(in vec2 _st, in float _index){\n    _index = fract(((_index-0.5)*2.0));\n    if (_index > 0.75) {\n        _st = vec2(1.0) - _st;\n    } else if (_index > 0.5) {\n        _st = vec2(1.0-_st.x,_st.y);\n    } else if (_index > 0.25) {\n        _st = 1.0-vec2(1.0-_st.x,_st.y);\n    }\n    return _st;\n}\nfloat circle(vec2 xy, vec2 center, float radius, float smooth_edge) {\n    float dist = distance(xy,center);\n    dist = smoothstep(radius, radius + smooth_edge, dist);\n    return dist;\n}\n\nvoid main() {\n    float count = 20.0;\n    vec2 st = gl_FragCoord.xy/u_resolution.xy;\n    st -= u_translate.xy;\n    st *= 1.0/u_scale.xy;\n    st *= count;\n\tst.x -= u_time * 2.0 *  random(vec2(floor(st).y,1.0));\n\n    vec2 ipos = floor(st);  // integer\n    vec2 fpos = fract(st);  // fraction\n\n    float speed = random(vec2(ipos.y));\n\n    float x_f = random(vec2(ipos.x, 0));\n    float y_f = random(vec2(0, ipos.y));\n\n    float color = 0.0;\n    color = random(vec2(x_f, y_f));\n\tcolor =\n    \t1.0 - (1.0 - circle(fract(st), vec2(0.5), 0.25, 0.1)) * color\n    \t;\n    vec4 f_color = vec4(vec3(color),1.0);\n    f_color.r = color < 1.0 ? 0.0 : 1.0;\n    f_color.g = color < 1.0 ? 0.0 : 1.0;\n    f_color.b = color < 1.0 ? color : 1.0;\n    f_color.a = color < 1.0 ? color : 0.0;\n\n    gl_FragColor = f_color;\n}\n",I="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute   vec2    a_position;\nuniform     mat4    u_ViewMatrix;\nvarying     vec2    v_surfacePosition;\n\nvoid main( void ){\n    gl_Position = u_ViewMatrix * vec4( a_position, 0., 1. );\n    v_surfacePosition      = a_position;\n}\n",E="\n// Author @patriciogv - 2015\n// Title: Truchet - 10 print\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform vec2    u_resolution;\nuniform vec2    u_mouse;\nuniform float   u_time;\nuniform vec3    u_translate;\nuniform vec3    u_scale;\nuniform vec3    u_rotate;\n\nvoid main(){\n    vec2 st = gl_FragCoord.xy/u_resolution.xy;\n    st -= u_translate.xy;\n    st *= 1.0/u_scale.xy;\n    vec3 color = vec3(0.0);\n\n    vec2 pos = vec2(0.5)-st;\n\n    float r = distance(pos, vec2(0.0,0.0))*2.0;\n    float a = atan(pos.y,pos.x);\n    float xxx = floor(u_time / 10.0) * 10.0 - u_time ;\n    float yyy = floor(u_time / 20.0) * 20.0 - u_time ;\n    float f = cos(a*0.5);\n    // f = abs(cos(a*3.));\n    // f = abs(cos(a*2.5))*.5+.3;\n    // f = abs(cos(a*12.)*sin(a*3.))*.8+.1;\n    // f = smoothstep(-.5,1., cos(a*10.))*0.2+0.5;\n    f = abs( cos(a*xxx) * sin(a*yyy) ) *.9 + .2;\n\n    color = vec3( 1.-smoothstep(f,f+0.005,r) );\n\n    gl_FragColor = vec4(color, 1.0);\n}\n",S="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute   vec2    a_position;\nvarying     vec2    v_surfacePosition;\n\nuniform     mat4    u_ViewMatrix;\n\nvoid main( void ){\n    gl_Position = u_ViewMatrix * vec4( a_position, 0., 1. );\n    v_surfacePosition      = a_position;\n}\n",C="\n// Author @patriciogv - 2015\n// Title: Truchet - 10 print\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform vec2    u_resolution;\nuniform float   u_time;\nuniform vec3    u_translate;\nuniform vec3    u_scale;\nuniform vec3    u_rotate;\n\nvec2 brickTile(vec2 _st, float _zoom){\n    _st *= _zoom;\n\n    // Here is where the offset is happening\n    // _st.x += step(1., mod(_st.y,2.0)) * 0.5;\n\n    return fract(_st);\n}\n\nfloat box(vec2 _st, vec2 _size){\n    _size = vec2(0.5)-_size*0.5;\n    vec2 uv = smoothstep(_size,_size+vec2(1e-4),_st);\n    uv *= smoothstep(_size,_size+vec2(1e-4),vec2(1.0)-_st);\n    return uv.x*uv.y;\n}\nfloat circle(vec2 xy, vec2 center, float radius, float smooth_edge) {\n    float dist = distance(xy,center);\n    dist = smoothstep(radius, radius + smooth_edge, dist);\n    return dist;\n}\n\nvoid main(void){\n    float count = 20.0;\n    vec2 st = gl_FragCoord.xy/u_resolution.xy;\n    st -= u_translate.xy;\n    st *= 1.0/u_scale.xy;\n\n    float sin_t = sin(u_time * 3.14 / 10.0);\n    float cos_t = cos(u_time * 3.14 / 10.0);\n    float col_flag= mod(st.y * count, 2.0) < 1.0 ? 1.0 : -1.0;\n    float row_flag= mod(st.x * count, 2.0) < 1.0 ? 1.0 : -1.0;\n    st += vec2(\n        col_flag * ( sin_t * cos_t < 0.0 ? cos_t : 0.0 ) * 0.5,\n        row_flag * ( sin_t * cos_t > 0.0 ? sin_t : 0.0 ) * 0.5);\n    vec3 color = vec3(0.0);\n\n    // Modern metric brick of 215mm x 102.5mm x 65mm\n    // http://www.jaharrison.me.uk/Brickwork/Sizes.html\n    // st /= vec2(2.15,0.65)/1.5;\n\n    // Apply the brick tiling\n    st = brickTile(st,count);\n\n    color = vec3(circle(st,vec2(0.5,0.5),0.4, 0.05));\n\n    // Uncomment to see the space coordinates\n    // color = vec3(st,0.0);\n\n    gl_FragColor = vec4(color,1.0);\n}\n",P="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute   vec2    a_position;\nvarying     vec2    v_surfacePosition;\nuniform     mat4    u_ViewMatrix;\n\nvoid main( void ){\n    gl_Position = u_ViewMatrix * vec4( a_position, 0., 1. );\n    v_surfacePosition      = a_position;\n}\n",L="\n// Author @patriciogv - 2015\n// Title: Truchet - 10 print\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#define PI 3.14159265358979323846\n#define TWO_PI 6.2448530717958647692\n\nuniform vec2    u_resolution;\nuniform vec2    u_mouse;\nuniform float   u_time;\nuniform vec3    u_translate;\nuniform vec3    u_scale;\nuniform vec3    u_rotate;\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\n\nfloat shape(vec2 st, float N){\n    st = st*2.-1.;\n    float a = atan(st.x,st.y)+PI;\n    float r = TWO_PI/N;\n    return abs(cos(floor(.5+a/r)*r-a)*length(st));\n}\n\nvoid main(){\n    vec2 st = gl_FragCoord.xy/u_resolution.xy;\n    st -= u_translate.xy;\n    st *= 1.0/u_scale.xy;\n\n    // move space from the center to the vec2(0.0)\n    st -= vec2(0.5);\n    // rotate the space\n    st = rotate2d( u_rotate.z ) * st;\n    // move it back to the original place\n    st += vec2(0.5);\n\n    vec3 color = vec3(0.0);\n\n    color = vec3( smoothstep(.5, .5 + .005, shape(st,6.0)) );\n\n    gl_FragColor = vec4(color, 1.0);\n}\n",V="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute   vec2    a_position;\nattribute   vec2    a_uv;\n\nvarying     vec2    v_surfacePosition;\nvarying     vec2    v_UV;\n\nuniform     vec3    u_translate;\nuniform     vec3    u_scale;\nuniform     vec3    u_rotate;\nuniform     mat4    u_ViewMatrix;\n\nvoid main( void ){\n    vec2 pos        = a_position.xy;\n    pos += vec2(0.5);\n    pos *= u_scale.xy;\n    pos -= vec2(0.5);\n\n    pos += u_translate.xy;\n\n    gl_Position     = u_ViewMatrix * vec4( pos, 0., 1. );\n    v_surfacePosition      = a_position;\n    v_UV = a_uv;\n}\n",U="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying  vec2 v_UV;\nuniform  sampler2D u_sampler;\n\nvoid main(void){\n    // [ 0, 0, 0, 1 ]  rgba\n    // gl_FragColor = vec4( vColor, 1. );\n    gl_FragColor = texture2D( u_sampler, v_UV );\n}\n",D="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute   vec2    a_position;\n\nuniform     mat4    u_ViewMatrix;\n\nvoid main( void ){\n    gl_Position = u_ViewMatrix * vec4( a_position, 0., 1. );\n}\n",B="\n#define SAMPLER3DBGRMAP 0.0\n\n#define SHADER_NAME fragment:default\n\n#extension GL_OES_standard_derivatives : enable\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform  float u_float;\n\nuniform  vec2 u_resolution;\n\nvoid main(void){\n    vec2 st = gl_FragCoord.xy / u_resolution.xy;\n    vec3 color = st.x < u_float ? vec3(0.0, 0.8, 0.0) : vec3(0.2, 0.2, 0.2);\n    // 20 js\n    color = st.y > (20.0 / u_resolution.y / 2.0) ? vec3(0.0) : color;\n\n    float alpha = st.y > (20.0 / u_resolution.y / 2.0) ? 0.0 : 0.8;\n    alpha = st.x < u_float ? alpha : 0.8 + SAMPLER3DBGRMAP;\n\n    gl_FragColor = vec4( color, alpha );\n}\n",O="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute   vec2    a_position;\nattribute   vec2    a_uv;\n\nvarying     vec2    v_surfacePosition;\nvarying     vec2    v_UV;\n\nuniform     vec3    u_translate;\nuniform     vec3    u_scale;\nuniform     vec3    u_rotate;\nuniform     float   u_time;\nuniform     mat4    u_ViewMatrix;\n\nvoid main( void ){\n    vec2 pos        = a_position.xy;\n    pos += vec2(0.5);\n    pos *= u_scale.xy;\n    pos -= vec2(0.5);\n\n    pos += u_translate.xy;\n    // pos.x = pos.x + sin(a_uv.y) ;\n\n    gl_Position     = u_ViewMatrix * vec4( pos, 0., 1. );\n    v_surfacePosition      = a_position;\n    v_UV = a_uv;\n}\n",N="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying  vec2 v_UV;\n\nuniform  sampler2D u_sampler;\nuniform  sampler2D u_sampler1;\n\nvoid main(void){\n    // [ 0, 0, 0, 1 ]  rgba\n    // gl_FragColor = vec4( vColor, 1. );\n\n    vec4 mask_color = texture2D( u_sampler1, v_UV );\n    float alpha     = (mask_color.r + mask_color.g + mask_color.b) > 1.0 ? 1.0 : 0.0;\n\n    float x = v_UV.x < 0.5 ? abs(v_UV.x - 0.5) : 1.0 - (v_UV.x - 0.5);\n    float y = v_UV.y < 0.5 ? abs(v_UV.y - 0.5) : 1.0 - (v_UV.y - 0.5);\n    vec4 ctx_color  = texture2D( u_sampler, vec2(x, y) );\n\n    gl_FragColor    = vec4(ctx_color.rgb, alpha);\n}\n";class H{static active(t,e,r){switch(e){case"grass":H.gress(t,r);case"progress":H.progress(t,r)}}static puase(){}static destroy(){H.webgldemo&&!H.webgldemo.isDestroy&&(H.webgldemo.destroy(),H.webgldemo=null,H.opt.meshProgress&&(H.opt.meshProgress=void 0))}static gress(t,e){const r={};r.canvas=t,H.webgldemo=new b(r),F.loadCall=H.createTextureLoad;new w("01",A,M),new w("02",I,E),new w("03",S,C),new w("04",P,L),new w("05",V,U),new w("06",D,B);const i=new w("07",O,N),s=(new z("02",H.webgldemo),new z("02",H.webgldemo),new z("03",H.webgldemo),new z("04",H.webgldemo),new z("05",H.webgldemo)),a=(new z("06",H.webgldemo),new R("01"));for(let t=0;t<20;t++)a.addVertex(-.5,2*t/19-1,0),a.addUV(0,t/19);for(let t=0;t<20;t++)a.addVertex(.5,2*t/19-1,0),a.addUV(1,t/19);for(let t=0;t<19;t++)a.addFace(t,20+t,20+t+1),a.addFace(t,20+t+1,t+1);a.update(H.webgldemo.gl);const n=new T("meshicon",a,i);n.translate[0]=0,n.translate[1]=-.2,n.scale[0]=.1,n.scale[1]=1,n.texture=H.webgldemo.createTexture("../../../resources/grass.jpg"),n.maskTexture=H.webgldemo.createTexture("../../../resources/grass_mark.jpg",1),s.addMesh(n),s.viewport[0]=0,s.viewport[1]=0,s.viewport[2]=H.webgldemo.width,s.viewport[3]=H.webgldemo.height,H.webgldemo.renderLoop=t=>{H.webgldemo.clearColor(),s.render(!1)},H.webgldemo.loop(0)}static progress(t,e){const r={};r.canvas=t,H.webgldemo=new b(r),F.loadCall=H.createTextureLoad;const i=H.webgldemo;if(!i.gl)return;const s=new w("05",V,U),a=new w("06",D,B),n=new z("06",i),o=new R("01");o.addVertex(-1,-1,0),o.addUV(0,0),o.addVertex(1,-1,0),o.addUV(1,0),o.addVertex(1,1,0),o.addUV(1,1),o.addVertex(-1,1,0),o.addUV(0,1),o.addFace(0,1,2),o.addFace(0,2,3),o.update(i.gl);const h=new R("03");h.addVertex(-1,-1,0),h.addVertex(1,-1,0),h.addVertex(1,20/t.height-1,0),h.addVertex(-1,20/t.height-1,0),h.addFace(0,1,2),h.addFace(0,2,3),h.update(i.gl);const u=new T("meshBG",o,s);u.translate[0]=0,u.translate[1]=0,u.scale[0]=1,u.scale[1]=1,u.texture=i.createTexture(e.bg),n.addMesh(u);const l=new T("meshProgress",h,a);l.translate[0]=0,l.translate[1]=0,l.scale[0]=1,l.scale[1]=1,l.ufloat=.01,n.addMesh(l),i.renderLoop=t=>{i.clearColor(),n.viewport[0]=0,n.viewport[1]=0,n.viewport[2]=i.width,n.viewport[3]=i.height,n.render(!0)},i.loop(0),H.opt.meshProgress=l}static updateProgress(t){H.opt.meshProgress&&(H.opt.meshProgress.ufloat=t)}}H.opt={},H.loadImageSucc=(t,e)=>{F.loaded(t,e,H.webgldemo)},H.createTextureLoad=(t,e,r)=>{if(self.promiseLoadImage)self.promiseLoadImage(t).then(e=>{H.loadImageSucc(e,t)});else{const e=new Image;e.onload=()=>{},e.src=t,e.decode().then(()=>{H.loadImageSucc(e,t)})}};const k=self.renderCanvas;k.width=1024,k.height=1024;const Z=new class{constructor(t){this.total=0,this.loaded=0,this.old=0,this.last=0,this.opacity=0,this.timeRef=0,this.calc=()=>{setTimeout(this.calc,100),this.last!==this.loaded&&(this.last=this.loaded,H.updateProgress((this.last-this.old)/(this.total-this.old)))},H.active(t.canvas,"progress",t)}show(t,e,r){this.total=e,this.old=r,this.timeRef||(this.timeRef=setTimeout(this.calc,100))}onProcess(t,e,r,i,s){this.loaded=i}clear(){this.total=0,this.loaded=0,this.old=0,this.timeRef&&clearTimeout(this.timeRef),this.timeRef=0,H.destroy()}}({canvas:k,bg:"../../../resources/texture.png"});Z.show("vvv",100,10),setInterval(()=>{Z.onProcess("","",0,Math.abs(100*Math.sin(Date.now()/5e3)),void 0)},50)}]);